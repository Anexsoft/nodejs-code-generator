import { Collection, ObjectId, MongoClient } from "mongodb";
import { {{entity}} } from './domain/{{lowercase entity}}.domain';

export type {{entity}}CreateInput = {};
export type {{entity}}UpdateInput = {};

export class {{entity}}Repository {
  private readonly db: Collection<{{entity}}>;

  constructor(db: MongoClient) {
    this.collection = db.collection<{{entity}}>('{{pluralize (lowercase entity)}}');
  }

  findAll(take: number, skip: number): {{entity}}[] {
    return this.collection.find().take(take).skip(skip);
  }

  findbyId(id: string): {{entity}} {
    return this.collection.findOne({ id });
  }

  create(entry: {{entity}}CreateInput) {
    return this.collection.insert(entry);
  }

  update(id: ObjectId, entry: {{entity}}UpdateInput) {
    return this.collection.update(
      { id },
      {
        $set: entry,
      },
    );
  }

  remove(id: ObjectId) {
    return this.collection.delete({ id });
  }
}